(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+1UZ":function(t,e,r){"use strict";r.r(e),r.d(e,"ProjectionModule",(function(){return I}));var n=r("ofXK"),o=r("tk/3"),i=r("TEn/"),c=r("5KXc"),s=r("p0FQ"),a=r("PCNd"),b=r("tyNb"),p=r("quSY"),h=r("vkgz"),u=r("eIep"),d=r("lJxs"),l=r("SxV6"),f=r("fXoL");class g{constructor(t){this.daysAgo=t.daysAgo,this.meanSquaredError=t.meanSquaredError,this.rootMeanSquaredError=t.rootMeanSquaredError,this.meanAbsolutePercentageError=t.meanAbsolutePercentageError,this.forecasted=t.items.map(t=>new m(t)),this.firstDay=this.calcFirstDay()}get realPrices(){return this.forecasted.filter(t=>t.real).map(t=>[t.date,t.real])}get forecastedPrices(){return this.forecasted.filter(t=>!t.real).map(t=>[t.date,t.forecasted])}calcFirstDay(){let t;for(const r of this.forecasted){if(!r.real)break;t=r.date}const e=new Date(t);return e.setDate(e.getDate()-this.daysAgo),e}}class m{constructor(t){this.date=new Date(t.ds+"T00:00:00"),this.forecasted=t.yhat,this.real=t.y}}let k=(()=>{class t{constructor(t){this.http=t}getProjection(t){const e=(new o.d).append("ticker",t);return this.http.get("/api/projections",{params:e})}}return t.\u0275fac=function(e){return new(e||t)(f.Nb(o.b))},t.\u0275prov=f.Db({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t{constructor(t){this.rest=t}priceForecast(t){return this.rest.getProjection(t).pipe(Object(d.a)(t=>new g(t)))}}return t.\u0275fac=function(e){return new(e||t)(f.Nb(k))},t.\u0275prov=f.Db({token:t,factory:t.\u0275fac}),t})();var P=r("KPdS"),x=r("pDGf"),j=r("GhNK");function w(t,e){1&t&&(f.Kb(0,"app-empty-container"),f.Ib(1,"ion-icon",7),f.Jb())}function M(t,e){if(1&t&&f.Ib(0,"app-chart",8),2&t){const t=f.Tb();f.Zb("ticker",t.ticker)("history",t.real)("forecast",t.forecast)}}function K(t,e){1&t&&(f.Kb(0,"div",9),f.Ib(1,"ion-skeleton-text",10),f.Ib(2,"ion-skeleton-text",10),f.Ib(3,"ion-skeleton-text",10),f.Ib(4,"ion-skeleton-text",10),f.Jb())}function O(t,e){if(1&t&&(f.Kb(0,"div",9),f.Kb(1,"ion-text",11),f.Kb(2,"strong"),f.hc(3,"Dias de Preg\xe3o:"),f.Jb(),f.hc(4),f.Jb(),f.Kb(5,"ion-text",11),f.Kb(6,"strong"),f.hc(7,"1\xb0 Dia de Preg\xe3o:"),f.Jb(),f.hc(8),f.Ub(9,"date"),f.Jb(),f.Kb(10,"ion-text",11),f.Kb(11,"strong"),f.hc(12,"Porcentagem de Erro (MAPE):"),f.Jb(),f.hc(13),f.Ub(14,"percent"),f.Jb(),f.Kb(15,"ion-text",11),f.Kb(16,"strong"),f.hc(17,"Erro M\xe9dio (RMSE):"),f.Jb(),f.hc(18),f.Ub(19,"currency"),f.Jb(),f.Jb()),2&t){const t=f.Tb();f.xb(4),f.jc(" ",t.daysAgo," "),f.xb(4),f.jc(" ",f.Vb(9,4,t.firstDay,"dd/MM/yyyy")," "),f.xb(5),f.jc(" ",f.Vb(14,7,t.mape,"1.2")," "),f.xb(5),f.jc(" ",f.Vb(19,10,t.rmse,"BRL")," ")}}let J=(()=>{class t{constructor(t,e){this.route=t,this.service=e,this.stockTicker="",this.subscriptions=new p.a,this.subscriptions.add(this.load())}get isLoading(){return!this.projection}get ticker(){return this.stockTicker}get real(){return this.realPrices}get forecast(){return this.forecastedPrices}get firstDay(){return this.projection.firstDay}get daysAgo(){return this.projection.daysAgo}get mape(){return this.projection.meanAbsolutePercentageError}get rmse(){return this.projection.rootMeanSquaredError}load(){return this.captureTicker().pipe(Object(h.a)(t=>{this.stockTicker=t}),Object(u.a)(t=>this.service.priceForecast(t))).subscribe(t=>{this.realPrices=t.realPrices,this.forecastedPrices=t.forecastedPrices,this.projection=t})}captureTicker(){return this.route.params.pipe(Object(d.a)(t=>t.ticker||""),Object(l.a)(t=>(null==t?void 0:t.length)>0))}}return t.\u0275fac=function(e){return new(e||t)(f.Hb(b.a),f.Hb(y))},t.\u0275cmp=f.Bb({type:t,selectors:[["app-projection-container"]],decls:12,vars:9,consts:[[3,"translucent"],["slot","start"],["slot","end",3,"baseHref","ticker"],[1,"container",3,"fullscreen"],[4,"ngIf"],[3,"ticker","history","forecast",4,"ngIf"],["class","details",4,"ngIf"],["name","trending-up-outline"],[3,"ticker","history","forecast"],[1,"details"],["animated",""],["color","dark"]],template:function(t,e){1&t&&(f.Kb(0,"ion-header",0),f.Kb(1,"ion-toolbar"),f.Kb(2,"ion-buttons",1),f.Ib(3,"ion-menu-button"),f.Jb(),f.Kb(4,"ion-title"),f.hc(5),f.Jb(),f.Ib(6,"app-search",2),f.Jb(),f.Jb(),f.Kb(7,"ion-content",3),f.gc(8,w,2,0,"app-empty-container",4),f.gc(9,M,1,3,"app-chart",5),f.gc(10,K,5,0,"div",6),f.gc(11,O,20,13,"div",6),f.Jb()),2&t&&(f.Zb("translucent",!0),f.xb(5),f.jc("Proje\xe7\xe3o",e.ticker?": "+e.ticker:" Futura",""),f.xb(1),f.Zb("baseHref","/projecao")("ticker",e.ticker),f.xb(1),f.Zb("fullscreen",!0),f.xb(1),f.Zb("ngIf",!e.ticker),f.xb(1),f.Zb("ngIf",e.ticker),f.xb(1),f.Zb("ngIf",e.ticker&&e.isLoading),f.xb(1),f.Zb("ngIf",e.ticker&&!e.isLoading))},directives:[i.l,i.z,i.c,i.r,i.y,P.a,i.j,n.m,x.a,i.m,j.a,i.v,i.w],pipes:[n.e,n.o,n.c],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-flow:column;margin-left:10%;width:75%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;margin-bottom:10px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:275px;height:20px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   app-empty-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:80px;width:auto}"]}),t})();const C=[{path:"",component:J},{path:":ticker",component:J}];let v=(()=>{class t{}return t.\u0275mod=f.Fb({type:t}),t.\u0275inj=f.Eb({factory:function(e){return new(e||t)},imports:[[b.h.forChild(C)],b.h]}),t})(),I=(()=>{class t{}return t.\u0275mod=f.Fb({type:t}),t.\u0275inj=f.Eb({factory:function(e){return new(e||t)},providers:[s.a,y,k],imports:[[c.a,n.b,o.c,i.A,a.a,v]]}),t})()}}]);